@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== THEME CSS VARIABLES ===== */
:root {
  /* Light theme - default (Blue Ninja Theme) */
  --color-surface: #f0f9ff;
  --color-bg: linear-gradient(to bottom, #ebf8ff, #ffffff);
  --color-bg-secondary: #f0f2f5;
  --color-card: #ffffff;
  --color-text: #1e293b;
  --color-text-secondary: #64748b;
  --color-border: #dee2e6;
  --color-primary: #1e40af;
  --color-primary-light: #60a5fa;
  --color-accent: #facc15;
  --color-secondary: #60a5fa;
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-info: #3b82f6;

  /* Gradients */
  --gradient-primary: linear-gradient(135deg, #a855f7 0%, #f43f5e 100%);
  --gradient-success: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);
  --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
}

/* Dark theme */
[data-theme='dark'] {
  --color-surface: #1a1a1a;
  --color-bg: #0f0f0f;
  --color-bg-secondary: #2d2d2d;
  --color-card: #262626;
  --color-text: #e5e5e5;
  --color-text-secondary: #a3a3a3;
  --color-border: #404040;
  --color-primary: #d8b4fe;
  --color-primary-light: #a855f7;
  --color-accent: #fb7185;
  --color-secondary: #22d3ee;
  --color-success: #34d399;
  --color-warning: #fbbf24;
  --color-error: #f87171;
  --color-info: #60a5fa;

  /* Gradients remain the same */
  --gradient-primary: linear-gradient(135deg, #d8b4fe 0%, #fb7185 100%);
  --gradient-success: linear-gradient(135deg, #34d399 0%, #22d3ee 100%);

  /* Darker shadows for dark mode */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5);
  --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
}

@layer base {
  body {
    background-color: var(--color-surface);
    color: var(--color-text);
    @apply min-h-screen font-sans antialiased transition-colors duration-300;
  }

  /* Headings */
  h1 {
    @apply text-3xl font-bold text-color-text;
  }

  h2 {
    @apply text-2xl font-semibold text-color-text;
  }

  h3 {
    @apply text-xl font-semibold text-color-text;
  }

  /* Links */
  a {
    @apply text-color-primary hover:text-color-primary-light transition-colors;
  }

  /* Inputs */
  input,
  textarea,
  select {
    background-color: var(--color-bg);
    color: var(--color-text);
    border-color: var(--color-border);
  }
}

@layer components {

  /* Cards */
  .ninja-card {
    background-color: var(--color-card);
    border-color: var(--color-border);
    @apply backdrop-blur-md border-4 border-white rounded-[2.5rem] p-8 shadow-2xl transition-all duration-300;
  }

  .card {
    background-color: var(--color-card);
    border-color: var(--color-border);
    @apply rounded-lg p-4 shadow-md transition-all duration-300;
  }

  .card:hover {
    @apply shadow-lg;
  }

  /* Buttons */
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 inline-flex items-center justify-center gap-2;
  }

  .btn-primary {
    background-color: var(--color-primary);
    @apply text-white py-3 px-6 rounded-xl font-bold text-base hover:shadow-lg active:scale-95 transition-all;
  }

  .btn-primary:hover {
    background-color: var(--color-primary-light);
  }

  .btn-secondary {
    background-color: var(--color-secondary);
    @apply text-white py-3 px-6 rounded-xl font-bold text-base hover:shadow-lg active:scale-95 transition-all;
  }

  .btn-danger {
    background-color: var(--color-error);
    @apply text-white py-3 px-6 rounded-xl font-bold text-base hover:shadow-lg active:scale-95 transition-all;
  }

  .btn-success {
    background-color: var(--color-success);
    @apply text-white py-3 px-6 rounded-xl font-bold text-base hover:shadow-lg active:scale-95 transition-all;
  }

  /* Input Fields */
  .input-field {
    background-color: var(--color-bg);
    border-color: var(--color-border);
    @apply w-full p-3 rounded-lg border-2 focus:border-color-primary focus:ring-0 outline-none text-base transition-all;
  }

  .input-field::placeholder {
    color: var(--color-text-secondary);
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium;
  }

  .badge-primary {
    background-color: var(--color-primary-light);
    color: var(--color-primary);
  }

  .badge-success {
    background-color: rgba(16, 185, 129, 0.1);
    color: var(--color-success);
  }

  .badge-error {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--color-error);
  }

  /* Alerts */
  .alert {
    @apply rounded-lg p-4 border-l-4;
  }

  .alert-info {
    background-color: rgba(59, 130, 246, 0.1);
    border-color: var(--color-info);
    color: var(--color-info);
  }

  .alert-success {
    background-color: rgba(16, 185, 129, 0.1);
    border-color: var(--color-success);
    color: var(--color-success);
  }

  .alert-warning {
    background-color: rgba(245, 158, 11, 0.1);
    border-color: var(--color-warning);
    color: var(--color-warning);
  }

  .alert-error {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: var(--color-error);
    color: var(--color-error);
  }
}

@layer utilities {
  .touch-none {
    touch-action: none;
  }

  /* Scrollbar hiding */
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Text utilities */
  .text-primary {
    color: var(--color-primary);
  }

  .text-secondary {
    color: var(--color-text-secondary);
  }

  .bg-primary {
    background-color: var(--color-primary);
  }

  .bg-card {
    background-color: var(--color-card);
  }

  /* Smooth transitions */
  .transition-smooth {
    @apply transition-all duration-300 ease-in-out;
  }
}

/* Responsive design */
@media (max-width: 640px) {
  .ninja-card {
    @apply p-5 rounded-[1.5rem] border-2;
  }

  .btn-primary {
    @apply py-2 text-sm;
  }

  h1 {
    @apply text-2xl;
  }

  h2 {
    @apply text-xl;
  }
}

@media (max-width: 768px) {
  body {
    font-size: 14px;
  }

  button {
    min-height: 48px;
    min-width: 48px;
  }

  .card {
    margin: 0;
    border-radius: 12px;
  }

  @media (hover: none) and (pointer: coarse) {
    .card:hover {
      transform: none;
    }

    button:hover {
      transform: none;
    }
  }

  @supports (padding: max(0px)) {
    body {
      padding-left: max(12px, env(safe-area-inset-left));
      padding-right: max(12px, env(safe-area-inset-right));
    }
  }
}

@media (max-height: 600px) and (orientation: landscape) {
  .header {
    padding: 8px 0;
  }

  .card {
    padding: 12px;
  }
}

@media (min-width: 1200px) {
  .container {
    max-width: 1200px;
  }
}

/* Support for Educational SVGs in Dark Mode */
[data-theme='dark'] .thematic-svg svg [stroke="black"],
[data-theme='dark'] .thematic-svg svg [stroke="#000"],
[data-theme='dark'] .thematic-svg svg [stroke="#000000"],
.dark .thematic-svg svg [stroke="black"],
.dark .thematic-svg svg [stroke="#000"],
.dark .thematic-svg svg [stroke="#000000"] {
  stroke: #ffffff !important;
}

[data-theme='dark'] .thematic-svg svg [fill="black"],
[data-theme='dark'] .thematic-svg svg [fill="#000"],
[data-theme='dark'] .thematic-svg svg [fill="#000000"],
.dark .thematic-svg svg [fill="black"],
.dark .thematic-svg svg [fill="#000"],
.dark .thematic-svg svg [fill="#000000"] {
  fill: #ffffff !important;
}

[data-theme='dark'] .thematic-svg svg text:not([fill]),
[data-theme='dark'] .thematic-svg svg text[fill="black"],
[data-theme='dark'] .thematic-svg svg text[fill="#000"],
[data-theme='dark'] .thematic-svg svg text[fill="#000000"],
.dark .thematic-svg svg text:not([fill]),
.dark .thematic-svg svg text[fill="black"],
.dark .thematic-svg svg text[fill="#000"],
.dark .thematic-svg svg text[fill="#000000"] {
  fill: #ffffff !important;
}

/* Improve 'blue' visibility in dark mode for educational diagrams */
[data-theme='dark'] .thematic-svg svg [stroke="blue"],
.dark .thematic-svg svg [stroke="blue"] {
  stroke: #60a5fa !important;
  /* sky-blue */
}

[data-theme='dark'] .thematic-svg svg [fill="blue"],
.dark .thematic-svg svg [fill="blue"] {
  fill: #60a5fa !important;
  /* sky-blue */
}

/* Ensure default text in SVG is visible in dark mode if not specified */
[data-theme='dark'] .thematic-svg svg text,
.dark .thematic-svg svg text {
  transition: fill 0.3s ease;
}