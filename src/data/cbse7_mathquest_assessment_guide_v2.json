{
  "schema_version": "2.0",
  "document_type": "assessment_and_generation_guide",
  "curriculum_id": "mathquest-cbse7-olympiad-eapcet-foundation",
  "generated_at": "2025-12-27T12:00:00+00:00",
  "mastery_profiles": [
    {
      "mastery_profile_id": "MP_CORE_CONCEPT",
      "name": "Core Concept (CBSE)",
      "intent": "Solid understanding with common misconceptions removed.",
      "requirements": {
        "min_attempts": 8,
        "accuracy_last_8": 0.8,
        "must_include_templates": [
          "TWO_TIER",
          "TRANSFER_MINI"
        ],
        "must_clear_misconception_probe": true
      }
    },
    {
      "mastery_profile_id": "MP_CORE_FLUENCY",
      "name": "Core Fluency (speed + accuracy)",
      "intent": "Fast, reliable execution for school tests and early exam prep.",
      "requirements": {
        "min_attempts": 10,
        "accuracy_last_10": 0.9,
        "median_time_sec_target": 45,
        "must_include_templates": [
          "NUMERIC_INPUT",
          "ERROR_ANALYSIS"
        ],
        "no_more_than_hints_per_item": 1
      }
    },
    {
      "mastery_profile_id": "MP_REASONING",
      "name": "Reasoning & Proof-lite",
      "intent": "Explain, justify, and connect representations.",
      "requirements": {
        "min_attempts": 8,
        "accuracy_last_8": 0.75,
        "must_include_templates": [
          "STEP_BUILDER",
          "TWO_TIER",
          "TRANSFER_MINI"
        ],
        "must_score_rubric_min": {
          "reasoning": 2,
          "representation": 2
        }
      }
    },
    {
      "mastery_profile_id": "MP_OLYMPIAD",
      "name": "Olympiad Challenge",
      "intent": "Non-routine problems, patterns, clever observations.",
      "requirements": {
        "min_attempts": 6,
        "accuracy_last_6": 0.7,
        "must_include_templates": [
          "STEP_BUILDER",
          "TRANSFER_MINI"
        ],
        "allowed_hints": 2,
        "must_solve_at_least_1_high_difficulty": true
      }
    },
    {
      "mastery_profile_id": "MP_EAPCET_FOUND",
      "name": "EAPCET Foundation",
      "intent": "Algebra/geometry fluency building blocks with time discipline.",
      "requirements": {
        "min_attempts": 12,
        "accuracy_last_12": 0.9,
        "median_time_sec_target": 40,
        "must_include_templates": [
          "NUMERIC_INPUT",
          "SORT_ORDER",
          "ERROR_ANALYSIS"
        ],
        "interleaving_required": true
      }
    }
  ],
  "sequencing_engine": {
    "session_arc": [
      {
        "phase": "warm_up",
        "time_min": 3,
        "rule": "2-3 retrieval items from past mastered atoms (spaced review)."
      },
      {
        "phase": "diagnose",
        "time_min": 4,
        "rule": "1 misconception-probe + 1 representation item for today's atom."
      },
      {
        "phase": "teach_by_example",
        "time_min": 4,
        "rule": "1 worked example with 'hide steps' toggle; learner predicts next step."
      },
      {
        "phase": "guided_practice",
        "time_min": 8,
        "rule": "2-3 items escalating: scaffolded -> normal -> mixed."
      },
      {
        "phase": "transfer",
        "time_min": 4,
        "rule": "1 novel context item; require estimate/check step."
      },
      {
        "phase": "reflect",
        "time_min": 2,
        "rule": "quick self-explain: 'what trick helped' + confidence rating."
      }
    ],
    "adaptation_rules": [
      {
        "if": "two_wrong_in_a_row_same_atom",
        "then": "switch_template_to_reveal_representation + show micro-lesson"
      },
      {
        "if": "wrong_matches_known_misconception",
        "then": "serve_repair_item(target_misconception) then retry original"
      },
      {
        "if": "fast_correct_3x",
        "then": "increase_difficulty or introduce interleaving with neighbor atom"
      },
      {
        "if": "high_hint_use",
        "then": "serve_strategy_atom (problem-solving foundations) item next"
      }
    ],
    "interleaving_policy": {
      "after_mastery": "mix 20-30% items from adjacent atoms and prerequisites",
      "rule": "never give >3 identical template types consecutively"
    }
  },
  "spaced_review_scheduler": {
    "model": "SM2-lite + retrieval-first",
    "initial_intervals_days": [
      1,
      3,
      7,
      14,
      30
    ],
    "promotion_rule": "advance interval when item correct with low hint and confidence>=3",
    "demotion_rule": "if wrong, back to previous interval and tag misconception",
    "daily_review_cap_minutes": 8
  },
  "analytics_spec": {
    "event_schema_version": "1.0",
    "core_events": {
      "item_served": [
        "user_id",
        "session_id",
        "item_id",
        "atom_id",
        "template_id",
        "difficulty",
        "timestamp"
      ],
      "first_action": [
        "item_id",
        "time_to_first_action_ms",
        "action_type"
      ],
      "attempt_submitted": [
        "item_id",
        "attempt_id",
        "response",
        "is_correct",
        "time_on_task_ms",
        "hints_used",
        "steps_used"
      ],
      "feedback_shown": [
        "item_id",
        "feedback_type",
        "misconception_id(optional)"
      ],
      "confidence_rated": [
        "item_id",
        "confidence_1_to_5"
      ],
      "repair_item_linked": [
        "item_id",
        "repair_item_id",
        "misconception_id"
      ]
    },
    "derived_metrics": {
      "mastery_probability": "Bayesian update using correctness + template weight + transfer weight",
      "misconception_rate": "wrong answers mapped to misconception_id / attempts",
      "fluency_index": "accuracy-weighted speed (per template normalization)",
      "transfer_index": "accuracy on transfer items vs core items",
      "forgetting_risk": "time since last correct vs interval schedule"
    }
  },
  "generation_prompts": {
    "global_system_prompt": "You are an expert Grade 7 CBSE + Olympiad math item writer. Generate questions that measure understanding, not guessing. Always include: clear stem, required data for the template, correct answer, solution steps, misconception tags (when applicable), and a short transfer follow-up. Keep English simple (India). Avoid trick wording unless the atom is Olympiad.",
    "global_constraints": [
      "Every item must map to exactly one atom_id and one template_id.",
      "Numbers should be grade-appropriate; avoid heavy fractions unless atom is fractions/rational.",
      "Include a quick estimation or check step in the solution when meaningful.",
      "For girls/teens: keep contexts respectful and varied (sports, science, art, shopping, coding, travel), avoid stereotypes.",
      "Avoid 'glitz' dependencies: interaction should provide mathematical insight."
    ],
    "template_prompt_recipes": [
      {
        "template_id": "TWO_TIER",
        "prompt": "Create a two-tier item: Tier-1 asks for the answer; Tier-2 asks 'why' with 4 reason options including 2 common misconceptions from the atom's misconception list."
      },
      {
        "template_id": "ERROR_ANALYSIS",
        "prompt": "Write a short incorrect worked solution (2-4 steps) that contains exactly one targeted misconception. Ask learner to identify the error type and correct the step."
      },
      {
        "template_id": "NUMBER_LINE_PLACE",
        "prompt": "Ask learner to place a value on a number line. Include line_min/max and a target_value. Provide a solution that explains placement and comparisons."
      },
      {
        "template_id": "STEP_BUILDER",
        "prompt": "Generate a multi-step problem and provide an expected step sequence (3-6 steps). Steps must be checkable and not too open-ended."
      },
      {
        "template_id": "TRANSFER_MINI",
        "prompt": "Generate a novel context question using the same concept but different surface features. Provide a 1-sentence reflection prompt: 'What was similar to the earlier problem?'"
      }
    ]
  },
  "json_schemas": {
    "question_item_schema": {
      "type": "object",
      "required": [
        "item_id",
        "atom_id",
        "template_id",
        "prompt",
        "answer",
        "solution"
      ],
      "properties": {
        "item_id": {
          "type": "string"
        },
        "atom_id": {
          "type": "string"
        },
        "template_id": {
          "type": "string"
        },
        "difficulty": {
          "type": "string",
          "enum": [
            "easy",
            "medium",
            "hard"
          ]
        },
        "prompt": {
          "type": "object"
        },
        "answer": {
          "type": "object"
        },
        "solution": {
          "type": "object"
        },
        "misconception_ids": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "transfer_item": {
          "type": "object"
        }
      }
    }
  },
  "notes_for_engineering_path": {
    "why_now": "EAPCET is years away, but algebra manipulation, coordinate thinking, and geometry reasoning are built early so later trigonometry/graphs feel natural.",
    "focus_atoms": [
      "ENG7-COORDINATE-FOUNDATION",
      "ENG7-CALC-FLUENCY"
    ],
    "weekly_micro_sprints": "2 short timed sets/week (6-8 minutes) to build calm speed without stress."
  }
}